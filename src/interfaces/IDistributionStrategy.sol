// SPDX-License-Identifier: MIT
pragma solidity ^0.8.0;

import {IDistributionContract} from "./IDistributionContract.sol";

/// @title IDistributionStrategy
/// @notice Interface for token distribution strategies.
interface IDistributionStrategy {
    /// @notice Emitted when a distribution is initialized
    /// @param distributionContract The contract that was created that will handle or manage the distribution.
    /// @param token The token that is being distributed.
    /// @param totalSupply The supply of the token that is being distributed.
    event DistributionInitialized(address indexed distributionContract, address indexed token, uint256 totalSupply);

    /// @notice Error thrown when the amount to be distributed is invalid
    /// @param amount The invalid amount
    /// @param maxAmount The maximum valid amount to be distributed
    error InvalidAmount(uint256 amount, uint256 maxAmount);

    /// @notice Initialize a distribution of tokens under this strategy.
    /// @dev Contracts can choose to deploy an instance with a factory-model or handle all distributions within the
    /// implementing contract. For some strategies this function will handle the entire distribution, for others it
    /// could merely set up initial state and provide additional entrypoints to handle the distribution logic.
    /// @param token The token that is being distributed.
    /// @param totalSupply The supply of the token that is being distributed.
    /// @param configData Arbitrary, strategy-specific parameters.
    /// @param salt The optional salt for deterministic deployment.
    /// @return distributionContract The contract that will handle or manage the distribution.
    ///         (Could be `address(this)` if the strategy is handled in-place, or a newly deployed instance).
    function initializeDistribution(address token, uint256 totalSupply, bytes calldata configData, bytes32 salt)
        external
        returns (IDistributionContract distributionContract);
}
